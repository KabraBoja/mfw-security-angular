{"version":3,"sources":["../src/mfw-security.service.js","../src/mfw-security.directives.js"],"names":["securityProvider","addStaticUser","user","users","id","addStaticUsers","angular","isObject","forEach","currentUser","undefined","this","$get","$q","$log","$timeout","$rootScope","$mfwSecurityConfig","$injector","_init","storedInfo","storage","get","isDefined","log","userInfo","parser","fromStorage","activate","_activate","validCredentials","result","_notifyLogin","invalidCredentials","clear","_notifyLogout","_logged","parse","set","_logout","isUndefined","warn","_getCurrentUser","_isLogged","_setPermissions","action","permissions","Error","isArray","_","union","difference","_permissions","_hasAny","debug","normalized","_normalizePermission","userPermissions","has","filter","_userHasPermission","length","_refreshAccessToken","accessToken","_notifyUpdateCredentials","_hasAll","isString","split","permission","negate","perm","charAt","substring","indexOf","_broadcast","EVENT_LOGIN","copy","EVENT_LOGOUT","EVENT_UPDATE_CREDENTIALS","event","data","$broadcast","userInfoParser","$mfwSecurity","init","logged","logout","isLogged","me","setPermissions","refreshAccessToken","hasAnyPermission","hasAllPermissions","SecurityModule","module","run","constant","heartbeatInterval","currentUserGetter","provider","$inject","factory","noop","hasAnyPermissionDirective","$compile","restrict","terminal","priority","compile","tElem","tAttrs","removeAttr","fnName","randomCheckFunctionName","attr","fn","scope","hasAllPermissionsDirective","ifLoggedDirective","ifLoggedOutDirective","suffix","Math","ceil","random","directive"],"mappings":"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","file":"mfw-security.min.js"}
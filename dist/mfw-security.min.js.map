{"version":3,"sources":["../src/mfw-security.service.js","../src/mfw-security.directives.js"],"names":["SecurityProvider","currentUser","this","$get","$q","$log","$timeout","$rootScope","$mfwSecurityConfig","$injector","_init","storedInfo","storage","get","angular","isDefined","log","userInfo","parser","fromStorage","activate","_activate","validCredentials","result","_notifyLogin","invalidCredentials","clear","_notifyLogout","_logged","user","parse","set","_logout","isUndefined","warn","undefined","_getCurrentUser","_isLogged","_setPermissions","action","permissions","Error","isArray","_","union","difference","_permissions","_hasAny","debug","normalized","_normalizePermission","userPermissions","has","filter","_userHasPermission","length","_refreshAccessToken","accessToken","_notifyUpdateCredentials","_hasAll","isString","split","isObject","permission","negate","perm","charAt","substring","indexOf","_broadcast","EVENT_LOGIN","copy","EVENT_LOGOUT","EVENT_UPDATE_CREDENTIALS","event","data","$broadcast","userInfoParser","$mfwSecurity","init","logged","logout","isLogged","me","setPermissions","refreshAccessToken","hasAnyPermission","hasAllPermissions","SecurityModule","module","run","constant","heartbeatInterval","currentUserGetter","provider","$inject","factory","noop","hasAnyPermissionDirective","$compile","restrict","terminal","priority","compile","tElem","tAttrs","removeAttr","fnName","randomCheckFunctionName","attr","fn","scope","hasAllPermissionsDirective","ifLoggedDirective","ifLoggedOutDirective","suffix","Math","ceil","random","directive"],"mappings":"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","file":"mfw-security.min.js"}